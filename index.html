<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ManuFit</title>

    <!-- FAVICON / LOGO (ficheiro na raiz do repo) -->
    <link rel="icon" type="image/png" href="MANUFIT.png" />

    <!-- CSS opcional (placeholder para nÃ£o dar 404; nÃ£o altera o visual) -->
    <link rel="stylesheet" href="assets/style.css" />
    <style>
      /* ====== VISUAL ORIGINAL (NÃƒO ALTERADO) ====== */
      body { background:#0f0f12; color:#fff; margin:0; font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Inter', Arial, sans-serif; }
      .page { min-height:100vh; padding-bottom:5rem; }
      .header {
        background: linear-gradient(to right, rgb(255,77,166) 0%, rgb(15,15,18) 60%);
        color:#fff; padding:16px; border-bottom:1px solid #ff4da6;
        display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px;
      }
      .brand { font-weight:700; font-size:1.25rem; line-height:1.2; color:#fff; }
      .brand .tag { font-size:.7rem; font-weight:500; color:#ffd1e8; line-height:1.2; }
      .brand-row { display:flex; align-items:center; gap:8px; }
      .brand-row img { width:36px; height:36px; border-radius:6px; object-fit:cover; border:1px solid rgba(255,255,255,.4); }

      .nav { display:flex; flex-wrap:wrap; gap:8px; }
      .nav button {
        background:#1f1f25; color:#fff; border:1px solid #ff4da6; border-radius:6px;
        padding:6px 10px; font-size:.8rem; font-weight:600; cursor:pointer;
      }
      .nav button.active { background:#ff4da6; color:#000; }

      .main { padding:24px 16px; max-width:900px; margin:0 auto; }
      .card {
        background:#1a1a22; border:1px solid #2a2a33; border-radius:10px;
        padding:16px; max-width:480px; width:100%; margin:40px auto; color:#fff;
      }
      .label { display:block; margin-bottom:8px; font-weight:600; color:#ff4da6; }
      .input { width:100%; background:#0f0f12; border:1px solid #ff4da6; border-radius:6px; padding:10px 12px; color:#fff; font-size:1rem; outline:none; }
      .primary { margin-top:16px; width:100%; background:#ff4da6; border:0; border-radius:6px; color:#000; font-weight:700; font-size:1rem; padding:12px; cursor:pointer; }
      .small { font-size:.8rem; opacity:.8; margin-top:12px; line-height:1.4; text-align:center; color:#bbb; }

      .section-card {
        background:#1a1a22; border:1px solid #2a2a33; border-radius:10px; padding:16px; margin:0 auto 24px; color:#fff;
      }
      .section-title { font-weight:800; margin:0 0 12px; font-size:1.1rem; color:#fff; }
      .link-list { display:flex; flex-direction:column; gap:8px; }
      .link-row { display:flex; align-items:center; justify-content:space-between; gap:12px; border:1px solid #2a2a33; border-radius:8px; padding:10px 12px; background:#111118; }
      .link-row a { background:#ff4da6; color:#000; text-decoration:none; font-weight:700; padding:6px 10px; border-radius:6px; }
      .muted { color:#bbb; font-size:.85rem; }

      .footer { color:#666; font-size:.7rem; text-align:center; padding:40px 16px; }

      /* esconder/mostrar secÃ§Ãµes internas */
      .hidden { display:none; }
    </style>
  </head>
  <body>
    <div id="app" class="page">

      <!-- HEADER -->
      <header class="header" id="header">
        <div class="brand">
          <div class="brand-row">
            <img src="MANUFIT.png" alt="ManuFit" />
            <div style="font-weight:700; color:#fff;">MANUFIT</div>
          </div>
          <div class="tag">Treino â€¢ NutriÃ§Ã£o â€¢ Resultados</div>
        </div>

        <nav class="nav" id="tabs">
          <button data-tab="treinos">Treinos</button>
          <button data-tab="alimentacao">AlimentaÃ§Ã£o</button>
          <button data-tab="cardio">Cardio</button>
          <button data-tab="relax">Relaxamento</button>
          <button data-tab="extra">Extra</button>
          <button data-tab="perfil">Perfil</button>
          <button id="btn-sair" title="Terminar sessÃ£o">Sair</button>
        </nav>
      </header>

      <!-- LOGIN GATE -->
      <main class="main" id="login-section">
        <div class="card">
          <form id="login-form">
            <label class="label">Introduz o teu e-mail para aceder</label>
            <input class="input" id="email" type="email" placeholder="exemplo@exemplo.com" />
            <button class="primary" type="submit">Entrar</button>

            <!-- preÃ§o abaixo do botÃ£o â€” sem emoji, como pediste -->
            <div style="margin-top:10px; font-weight:600; font-size:1rem; color:#ff4da6; text-align:center;">
              Â£39.99 / mÃªs
            </div>

            <div class="small">
              <div>â€¢ Apenas alunas autorizadas tÃªm acesso.</div>
              <div>â€¢ Se ainda nÃ£o tens acesso, fala com Manu ðŸ’–</div>
              <div style="margin-top:8px; color:#ff4da6;">Suporte: manumendes199514@gmail.com</div>
            </div>
          </form>
        </div>
      </main>

      <!-- APP -->
      <main class="main hidden" id="app-section">

        <!-- ABA TREINOS -->
        <section id="aba-treinos" class="">
          <div class="section-card">
            <div class="section-title">Treinos</div>

            <div class="link-list">
              <!-- INICIANTE (ficheiro dedicado, jÃ¡ existente) -->
              <div class="link-row">
                <b>Iniciante (5 dias)</b>
                <a href="treinos-iniciante.html">Abrir</a>
              </div>

              <!-- AVANÃ‡ADO (12 meses). MÃªs 1 aberto; MÃªs 2-12 bloqueados por tempo. -->
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 1</b>  <a id="adv-m1"  href="treinos-avancado-m1.html"  data-month="1">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 2</b>  <a id="adv-m2"  href="treinos-avancado-m2.html"  data-month="2">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 3</b>  <a id="adv-m3"  href="treinos-avancado-m3.html"  data-month="3">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 4</b>  <a id="adv-m4"  href="treinos-avancado-m4.html"  data-month="4">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 5</b>  <a id="adv-m5"  href="treinos-avancado-m5.html"  data-month="5">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 6</b>  <a id="adv-m6"  href="treinos-avancado-m6.html"  data-month="6">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 7</b>  <a id="adv-m7"  href="treinos-avancado-m7.html"  data-month="7">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 8</b>  <a id="adv-m8"  href="treinos-avancado-m8.html"  data-month="8">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 9</b>  <a id="adv-m9"  href="treinos-avancado-m9.html"  data-month="9">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 10</b> <a id="adv-m10" href="treinos-avancado-m10.html" data-month="10">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 11</b> <a id="adv-m11" href="treinos-avancado-m11.html" data-month="11">Abrir</a></div>
              <div class="link-row"><b>AvanÃ§ado â€” MÃªs 12</b> <a id="adv-m12" href="treinos-avancado-m12.html" data-month="12">Abrir</a></div>
            </div>
          </div>
        </section>

        <!-- ABA ALIMENTAÃ‡ÃƒO (4 opÃ§Ãµes logo Ã  entrada, como pediste) -->
        <section id="aba-alimentacao" class="hidden">
          <div class="section-card">
            <div class="section-title">AlimentaÃ§Ã£o</div>
            <div class="link-list">
              <div class="link-row"><b>Base â€” Hipertrofia</b>      <a href="alimentacao-base-hipertrofia.html">Abrir</a></div>
              <div class="link-row"><b>Base â€” Emagrecimento</b>    <a href="alimentacao-base-emagrecimento.html">Abrir</a></div>
              <div class="link-row"><b>MÃªs 1 â€” Hipertrofia</b>     <a href="alimentacao-m1-hipertrofia.html">Abrir</a></div>
              <div class="link-row"><b>MÃªs 1 â€” Emagrecimento</b>   <a href="alimentacao-m1-emagrecimento.html">Abrir</a></div>
            </div>
            <div class="small muted">As quatro opÃ§Ãµes aparecem logo ao abrir a aba, sem passos intermÃ©dios.</div>
          </div>
        </section>

        <!-- ABA CARDIO -->
        <section id="aba-cardio" class="hidden">
          <div class="section-card">
            <div class="section-title">Cardio</div>
            <div class="link-list">
              <div class="link-row"><b>Plano de Cardio</b> <a href="cardio.html">Abrir</a></div>
            </div>
          </div>
        </section>

        <!-- ABA RELAXAMENTO -->
        <section id="aba-relax" class="hidden">
          <div class="section-card">
            <div class="section-title">Relaxamento</div>
            <div class="link-list">
              <div class="link-row"><b>Rotina de Relaxamento</b> <a href="relaxamento.html">Abrir</a></div>
            </div>
          </div>
        </section>

        <!-- ABA EXTRA -->
        <section id="aba-extra" class="hidden">
          <div class="section-card">
            <div class="section-title">Extra</div>
            <div class="link-list">
              <div class="link-row"><b>Extra â€” (glÃºteo, quadrÃ­ceps, posteriores, trÃ­ceps)</b> <a href="extra.html">Abrir</a></div>
            </div>
          </div>
        </section>

        <!-- ABA PERFIL -->
        <section id="aba-perfil" class="hidden">
          <div class="section-card">
            <div class="section-title">Perfil</div>
            <div class="small">Email: <span id="perfil-email"></span></div>
          </div>
        </section>
      </main>

      <footer class="footer">Â© <span id="year"></span> MANUFIT. Todos os direitos reservados.</footer>
    </div>

    <script>
      // ======== AUTH BÃSICO (sem alterar o teu fluxo) ========
      const KEY_EMAIL = 'manufit_email';
      const KEY_TAB   = 'manufit_tab';
      const KEY_START_PREFIX = 'manufit_adv_start_'; // start por utilizador (email)

      const loginSection = document.getElementById('login-section');
      const appSection   = document.getElementById('app-section');
      const emailInput   = document.getElementById('email');
      const loginForm    = document.getElementById('login-form');
      const perfilEmail  = document.getElementById('perfil-email');
      const btnSair      = document.getElementById('btn-sair');

      function isAuthed(){ return !!localStorage.getItem(KEY_EMAIL); }
      function getEmail(){ return (localStorage.getItem(KEY_EMAIL) || '').trim().toLowerCase(); }
      function saveEmail(v){ localStorage.setItem(KEY_EMAIL, v); }
      function logout(){ localStorage.removeItem(KEY_EMAIL); }

      function showLogin(){
        loginSection.classList.remove('hidden');
        appSection.classList.add('hidden');
        emailInput && emailInput.focus();
      }
      function showApp(){
        loginSection.classList.add('hidden');
        appSection.classList.remove('hidden');
        if (perfilEmail) perfilEmail.textContent = getEmail();
        ensureStartDate(); // garante start do avanÃ§ado Ã  primeira entrada
        applyAdvLocks();   // aplica bloqueios (MÃªs 2-12)
      }

      function renderAuth(){
        if(isAuthed()) showApp(); else showLogin();
      }

      loginForm?.addEventListener('submit', (e)=>{
        e.preventDefault();
        const v = (emailInput?.value || '').trim();
        if(!v) return;
        saveEmail(v);
        renderAuth();
      });

      btnSair?.addEventListener('click', ()=>{
        logout();
        // volta ao login imediatamente (como pediste)
        showLogin();
        // e garantir que o destaque de abas reseta para Treinos ao voltar a entrar
        localStorage.setItem(KEY_TAB, 'treinos');
        highlightActive('treinos');
      });

      // ======== ABAS (destaque rosa em cada aba) ========
      const tabs = document.querySelectorAll('#tabs button[data-tab]');
      const sections = {
        treinos: document.getElementById('aba-treinos'),
        alimentacao: document.getElementById('aba-alimentacao'),
        cardio: document.getElementById('aba-cardio'),
        relax: document.getElementById('aba-relax'),
        extra: document.getElementById('aba-extra'),
        perfil: document.getElementById('aba-perfil'),
      };

      function setActive(tab){
        Object.keys(sections).forEach(k=>{
          if(sections[k]) sections[k].classList.add('hidden');
        });
        if (sections[tab]) sections[tab].classList.remove('hidden');
        localStorage.setItem(KEY_TAB, tab);
        highlightActive(tab);
      }

      function highlightActive(tab){
        tabs.forEach(b=>b.classList.remove('active'));
        const btn = Array.from(tabs).find(b => b.dataset.tab === tab);
        if (btn) btn.classList.add('active');
      }

      tabs.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const tab = btn.dataset.tab;
          setActive(tab);
        });
      });

      // inicializaÃ§Ã£o de abas
      function initTabs(){
        const saved = localStorage.getItem(KEY_TAB) || 'treinos';
        setActive(saved);
      }

      // ======== BLOQUEIO AVANÃ‡ADO POR TEMPO (MÃªs 2â€¦12) ========
      const DAYS_PER_MONTH = 30;

      function startKeyFor(email){
        return KEY_START_PREFIX + (email || 'anon');
      }

      function ensureStartDate(){
        const email = getEmail();
        const k = startKeyFor(email);
        if (!localStorage.getItem(k)) {
          // regista a data de inÃ­cio do avanÃ§ado no 1Âº login deste email
          localStorage.setItem(k, new Date().toISOString());
        }
      }

      function getStartDate(){
        const email = getEmail();
        const iso = localStorage.getItem(startKeyFor(email));
        return iso ? new Date(iso) : new Date();
      }

      function daysSince(date){
        const ms = Date.now() - date.getTime();
        return Math.floor(ms / 86400000);
      }

      function unlockDateFor(monthNumber){
        // MÃªs 1: 0 dias, MÃªs 2: 60, MÃªs 3: 90, â€¦ MÃªs n: n*30
        const requiredDays = monthNumber * DAYS_PER_MONTH;
        const start = getStartDate();
        const unlock = new Date(start.getTime() + requiredDays*86400000);
        return { requiredDays, unlock };
      }

      function applyAdvLocks(){
        // MÃªs 1 sempre aberto
        const advLinks = Array.from(document.querySelectorAll('a[id^="adv-m"]'));
        const start = getStartDate();
        const d = daysSince(start);

        advLinks.forEach(a=>{
          const month = parseInt(a.dataset.month, 10);
          if (!month || month === 1) {
            // MÃªs 1 livre
            a.dataset.locked = 'false';
            a.onclick = null;
            a.style.opacity = '';
            a.style.pointerEvents = '';
            a.title = '';
            return;
          }
          const { requiredDays, unlock } = unlockDateFor(month);
          const unlocked = d >= requiredDays;

          if (unlocked) {
            a.dataset.locked = 'false';
            a.onclick = null;
            a.style.opacity = '';
            a.style.pointerEvents = '';
            a.title = '';
          } else {
            a.dataset.locked = 'true';
            a.style.opacity = '0.65';          // leve indicaÃ§Ã£o, sem mudar o visual base
            a.style.pointerEvents = 'auto';     // mantemos cursor normal, mas bloqueamos por JS
            const dd = unlock.toLocaleDateString('pt-PT');
            a.title = 'Bloqueado atÃ© ' + dd;
            a.onclick = (ev)=>{
              ev.preventDefault();
              alert('ConteÃºdo bloqueado para este email.\n\nDisponÃ­vel a partir de: ' + dd + '\n(Regras: desbloqueia um mÃªs a cada 30 dias de utilizaÃ§Ã£o)');
            };
          }
        });
      }

      // ======== INICIALIZAÃ‡ÃƒO ========
      document.getElementById('year').textContent = new Date().getFullYear();
      renderAuth();
      initTabs();
      // aplicar bloqueios tambÃ©m em mudanÃ§as futuras de aba
      applyAdvLocks();
    </script>
  </body>
</html>
